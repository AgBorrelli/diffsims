language: python
python:
  - "3.5"
  - "3.6"

sudo: false

before_install:
  - "pip install sphinx"
  - "pip install hyperspy"
  - "pip install pymatgen"
  - "pip install Cython"
  - "pip install transforms3d"

install:
  - "python setup.py install"
script:
  - pytest tests/test_diffraction_signal.py  # until more tests implemented
  - sphinx-build -b html docs/source docs/build

deploy:
  provider: pages
  skip_cleaup: true
  github_token: $GITHUB_TOKEN
  local_dir: docs/build
  on:
    branch: continuous-integration
